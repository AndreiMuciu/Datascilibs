repo_full_name,issue_id,comment_id,user_login,user_id,created_at,updated_at,body,reactions_total,reactions_plus1,reactions_minus1,reactions_laugh,reactions_hooray,reactions_confused,reactions_heart
stefan-jansen/machine-learning-for-trading,2646888214,2651392844,k1t3-fly3r,96368375,2025-02-11T16:42:07+00:00,2025-02-11T16:48:14+00:00,"Is this the code you're running? I ran the notebook with barely any edits. I ran it with different itch files and it worked just fine as of last week, 
```
with pd.HDFStore(itch_store) as store:
    stocks = store['R'].loc[:, ['stock_locate', 'stock']]
    # trades = store['P'].append(store['Q'].rename(columns={'cross_price': 'price'}), sort=False).merge(stocks)
    trades = pd.concat([store['P'], store['Q'].rename(columns={'cross_price': 'price'})], ignore_index=True, sort=False).merge(stocks)

trades['value'] = trades.shares.mul(trades.price)
trades['value_share'] = trades.value.div(trades.value.sum())

trade_summary = trades.groupby('stock').value_share.sum().sort_values(ascending=False)
trade_summary.iloc[:50].plot.bar(figsize=(14, 6), color='darkblue', title='Share of Traded Value')

plt.gca().yaxis.set_major_formatter(FuncFormatter(lambda y, _: '{:.0%}'.format(y)))
sns.despine()
plt.tight_layout()

```
Fix:
Replace 

`trades = store['P'].append(store['Q'].rename(columns={'cross_price': 'price'}), sort=False).merge(stocks)`

With: 

`trades = pd.concat([store['P'], store['Q'].rename(columns={'cross_price': 'price'})], ignore_index=True, sort=False).merge(stocks)`

***Pandas updates deprecated `.append()` , you will run into this a lot in the notebooks and the fix will be to refactor your code to use `pd.concat()`.
Output:

![Image](https://github.com/user-attachments/assets/48c12a3b-f572-493d-8c9e-f07c09f351b7)",0,0,0,0,0,0,0
stefan-jansen/machine-learning-for-trading,2646888214,2759846729,elsdes3,92226676,2025-03-27T23:56:41+00:00,2025-03-28T16:43:40+00:00,"I think this is a duplicate of a [previously opened issue](https://github.com/stefan-jansen/machine-learning-for-trading/issues/310). A candidate solution to this error was also posted [in this reply to the issue](https://github.com/stefan-jansen/machine-learning-for-trading/issues/310#issuecomment-2380627694) - the solution involved (a) specifying a version for both `numpy` and `pandas` during creation of the Python environment and (b) using Python 3.8, which is also specified in the [installation instructions for this repo](https://github.com/stefan-jansen/machine-learning-for-trading/tree/main/installation#installation-instructions).

I recommend merging this issue with that one (number 310) or closing this one.",0,0,0,0,0,0,0
